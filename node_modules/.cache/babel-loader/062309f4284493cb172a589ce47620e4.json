{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Desktop\\\\DEV\\\\Projet js\\\\site dofus temporise 5\\\\src\\\\Manager.js\",\n    _s2 = $RefreshSig$();\n\nimport HomePage from \"./Pages/HomePage\";\nimport { useState, useEffect, useRef } from 'react';\nimport DBPage from \"./Pages/DBPage\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Manager() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [RecetteRecherche, setRecetteRecherche] = useState([]);\n  const [ListItem, setListItem] = useState([]);\n  const [ListeCarte, setListeCarte] = useState([]);\n  const [RequestStatus, setRequestStatus] = useState(0);\n  const [RequestStatusFrom, setRequestStatusFrom] = useState('');\n  const [ListeRecette, setListeRecette] = useState([]);\n  const [NbrRequest, setNbrRequest] = useState(0);\n  const [LienBack] = useState('http://167.172.176.232:8888');\n  useEffect(() => {\n    GetListItem();\n    GetListCarte();\n    GetListeRecette(\"/GetNewCraft/\");\n  }, []);\n\n  async function GetListItem() {\n    fetch(LienBack + '/GetItemDTO/', {\n      method: 'get',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(function (res) {\n      // res.items.\n      res.items.forEach(element => {\n        element.name = element.name.replaceAll('_', ' '); // element.name.\n      });\n      setListItem(res.items);\n    });\n  }\n\n  async function GetListCarte() {\n    fetch(LienBack + '/GetCarte/', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(function (res) {\n      // res.items.\n      setListeCarte(res.Carte);\n    });\n  }\n\n  function NewCraft(Craft) {\n    fetch(LienBack + '/AddCraft/', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Craft)\n    }).then(res => res.json()).then(function (res) {\n      console.log(res);\n      setRequestStatusFrom(res.Api);\n      setRequestStatus(res.statut);\n      setNbrRequest(NbrRequest + 1);\n    });\n  }\n\n  function GetListeRecette(Url) {\n    fetch(LienBack + Url, {\n      method: 'get',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(function (res) {\n      // res.items.\n      setListeRecette(res.listeCraft);\n    });\n  }\n\n  function AddCarte(Param) {\n    fetch(LienBack + '/AddCarte/', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Param)\n    }).then(res => res.json()).then(function (res) {\n      if (res.statut === 200) {\n        GetListCarte();\n      }\n    });\n  }\n\n  function GetRecetteWithCarte(Param) {\n    fetch(LienBack + '/GetCraftCarte/', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Param)\n    }).then(res => res.json()).then(function (res) {\n      if (res.statut === 200) {\n        setListeRecette(res.listeCraft);\n      } else setListeRecette([]);\n    });\n  }\n\n  function GetRecetteWithItem(Param) {\n    fetch(LienBack + '/GetCraft/', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Param)\n    }).then(res => res.json()).then(function (res) {\n      if (res.statut === 200) setListeRecette(res.listeCraft);else {\n        setListeRecette([]);\n      }\n    });\n  }\n\n  function ResetStatus() {\n    setRequestStatus(0);\n  }\n\n  function Rechercherecette(Item) {\n    fetch(LienBack + '/GetCraft/', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Item)\n    }).then(res => res.json()).then(function (res) {\n      // if(RequestStatus===0)\n      console.log(res.statut);\n\n      if (res.statut !== 400) {\n        setRecetteRecherche(res.listeCraft[0]);\n        console.log(res.listeCraft[0]);\n      }\n\n      setRequestStatusFrom(res.Api);\n      setRequestStatus(res.statut);\n      setNbrRequest(NbrRequest + 1);\n    });\n  }\n\n  function DeleteItem(Item) {\n    console.log(\"mqslkdfmqslkd\");\n    fetch(LienBack + '/DeleteCraft/', {\n      method: 'delete',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Item)\n    }).then(res => res.json()).then(function (res) {\n      if (RequestStatus === 0) {\n        if (res.statut !== 400) GetListeRecette(\"/GetNewCraft/\");\n      }\n    });\n  }\n\n  function ModifItem(Item) {\n    console.log(\"Modif item\");\n    fetch(LienBack + '/ChangeCtaft/', {\n      method: 'put',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(Item)\n    }).then(res => res.json()).then(function (res) {\n      // if(res.statut!==400)\n      GetListeRecette(\"/GetNewCraft/\");\n    });\n  }\n\n  const [son, setson] = useState(LienBack + \"/GetSong/1\");\n  const [count, setCount] = useState(0);\n  useInterval(() => {\n    const audioEl = document.getElementById(\"Audio\");\n\n    if (audioEl.paused) {\n      setson(LienBack + \"/GetSong/\" + count);\n      document.getElementById(\"Audio\").load();\n      setCount(count + 1);\n      if (audioEl.paused) audioEl.play(); // const audioEl = document.getElementById(\"AudioDiv2\")\n      // audioEl.pause()\n      // audioEl.play()\n    }\n\n    console.log(LienBack + \"/GetSong/\" + count);\n  }, Math.floor(Math.random() * 3600000 - 1) + 1800000);\n\n  function useInterval(callback, delay) {\n    _s();\n\n    const savedCallback = useRef(); // Remember the latest function.\n\n    useEffect(() => {\n      savedCallback.current = callback;\n    }, [callback]); // Set up the interval.\n\n    useEffect(() => {\n      function tick() {\n        savedCallback.current();\n      }\n\n      if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    }, [delay]);\n  } // RefreshPage={GetListeRecette(\"GetNewCraft/\")}\n\n\n  _s(useInterval, \"dqNZMqbncP+HtqBlD20aSNv0Ugk=\");\n\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        children: /*#__PURE__*/_jsxDEV(HomePage, {\n          NewCraft: NewCraft,\n          NbrRequest: NbrRequest,\n          ResetStatus: ResetStatus,\n          Rechercherecette: Rechercherecette,\n          Recette: RecetteRecherche,\n          ListItem: ListItem,\n          ListeCarte: ListeCarte,\n          RefreshPage: GetListeRecette,\n          Status: RequestStatus,\n          RequestStatusFrom: RequestStatusFrom,\n          lienBack: LienBack\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/BDP\",\n        children: /*#__PURE__*/_jsxDEV(DBPage, {\n          ListItem: ListItem,\n          ListeCarte: ListeCarte,\n          ListeRecette: ListeRecette,\n          GetRecetteWithItem: GetRecetteWithItem,\n          AddCarte: AddCarte,\n          GetRecetteWithCarte: GetRecetteWithCarte,\n          DeleteItem: DeleteItem,\n          ModifItem: ModifItem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      id: \"Audio\",\n      className: \"audio-element\",\n      children: /*#__PURE__*/_jsxDEV(\"source\", {\n        src: son\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Manager, \"JykPHFoD1u51JLsuUkwD36gtJWA=\", false, function () {\n  return [useInterval];\n});\n\n_c = Manager;\nexport default Manager;\n\nvar _c;\n\n$RefreshReg$(_c, \"Manager\");","map":{"version":3,"sources":["C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/src/Manager.js"],"names":["HomePage","useState","useEffect","useRef","DBPage","BrowserRouter","Router","Switch","Route","Manager","RecetteRecherche","setRecetteRecherche","ListItem","setListItem","ListeCarte","setListeCarte","RequestStatus","setRequestStatus","RequestStatusFrom","setRequestStatusFrom","ListeRecette","setListeRecette","NbrRequest","setNbrRequest","LienBack","GetListItem","GetListCarte","GetListeRecette","fetch","method","headers","then","res","json","items","forEach","element","name","replaceAll","Carte","NewCraft","Craft","body","JSON","stringify","console","log","Api","statut","Url","listeCraft","AddCarte","Param","GetRecetteWithCarte","GetRecetteWithItem","ResetStatus","Rechercherecette","Item","DeleteItem","ModifItem","son","setson","count","setCount","useInterval","audioEl","document","getElementById","paused","load","play","Math","floor","random","callback","delay","savedCallback","current","tick","id","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import HomePage from \"./Pages/HomePage\"\r\nimport { useState,useEffect,useRef} from 'react';\r\nimport DBPage from \"./Pages/DBPage\"\r\nimport {  BrowserRouter as Router, Switch, Route,} from \"react-router-dom\";\r\n\r\n\r\nfunction Manager() {\r\n  const [RecetteRecherche, setRecetteRecherche] = useState([]);\r\n  const [ListItem, setListItem] = useState([]);\r\n  const [ListeCarte, setListeCarte] = useState([]);\r\n  \r\n  const [RequestStatus, setRequestStatus] = useState(0);\r\n  const [RequestStatusFrom, setRequestStatusFrom] = useState('');\r\n  const [ListeRecette, setListeRecette] = useState([]);\r\n  const [NbrRequest, setNbrRequest] = useState(0);\r\n\r\n  const [LienBack] = useState('http://167.172.176.232:8888');\r\n\r\n\r\n  useEffect(() => {\r\n    GetListItem()\r\n    GetListCarte()\r\n    GetListeRecette(\"/GetNewCraft/\");\r\n  }, [])\r\n  async function GetListItem()\r\n  {\r\n    fetch(LienBack + '/GetItemDTO/', {\r\n      method: 'get',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      res.items.forEach(element => {\r\n        element.name=element.name.replaceAll('_',' ')\r\n        // element.name.\r\n      });\r\n      setListItem(res.items)\r\n    });\r\n  }\r\n  async function GetListCarte()\r\n  {\r\n    fetch(LienBack + '/GetCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      setListeCarte(res.Carte)\r\n    });\r\n  }\r\n\r\n  function NewCraft(Craft)\r\n  {\r\n    fetch(LienBack + '/AddCraft/', {\r\n        method: 'post',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Craft)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        \r\n          console.log(res);  \r\n          setRequestStatusFrom(res.Api);\r\n          setRequestStatus(res.statut);\r\n          setNbrRequest(NbrRequest+1);\r\n      });\r\n  }\r\n  function GetListeRecette(Url)\r\n  {\r\n    fetch(LienBack + Url, {\r\n      method: 'get',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      setListeRecette(res.listeCraft)\r\n    });\r\n  }\r\n  function AddCarte(Param)\r\n  {\r\n    fetch( LienBack + '/AddCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n      {\r\n        GetListCarte()\r\n      }\r\n    });\r\n  }\r\n  function GetRecetteWithCarte(Param)\r\n  {\r\n    fetch(LienBack + '/GetCraftCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n      {\r\n         setListeRecette(res.listeCraft)\r\n      }\r\n      else\r\n        setListeRecette([])\r\n        \r\n    });\r\n  }\r\n  function GetRecetteWithItem(Param)\r\n  {\r\n    fetch(LienBack + '/GetCraft/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n        setListeRecette(res.listeCraft)\r\n      else\r\n      {\r\n        \r\n        setListeRecette([])\r\n      }\r\n        \r\n    });\r\n  }\r\n  function ResetStatus(){setRequestStatus(0);}\r\n  function Rechercherecette(Item)\r\n  {\r\n    fetch( LienBack + '/GetCraft/', {\r\n        method: 'post',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        // if(RequestStatus===0)\r\n          console.log(res.statut);  \r\n          if(res.statut!==400)\r\n          {\r\n            setRecetteRecherche(res.listeCraft[0])\r\n            console.log(res.listeCraft[0])\r\n            \r\n          }\r\n            \r\n          setRequestStatusFrom(res.Api);\r\n          setRequestStatus(res.statut);\r\n          setNbrRequest(NbrRequest+1);\r\n      });\r\n  }\r\n  function DeleteItem(Item)\r\n  {\r\n    console.log(\"mqslkdfmqslkd\")\r\n    fetch(LienBack + '/DeleteCraft/', {\r\n        method: 'delete',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        if(RequestStatus===0)\r\n        {\r\n          if(res.statut!==400)\r\n            GetListeRecette(\"/GetNewCraft/\");\r\n        }\r\n      });\r\n  }\r\n  \r\n  function ModifItem(Item)\r\n  {\r\n    console.log(\"Modif item\")\r\n    fetch(LienBack + '/ChangeCtaft/', {\r\n        method: 'put',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n          // if(res.statut!==400)\r\n          GetListeRecette(\"/GetNewCraft/\");\r\n      });\r\n  }\r\n  \r\n  const [son, setson] = useState(LienBack + \"/GetSong/1\")\r\n  const [count, setCount] = useState(0);\r\n  useInterval(() => {\r\n    const audioEl = document.getElementById(\"Audio\")\r\n    if(audioEl.paused)\r\n    {\r\n      setson(LienBack + \"/GetSong/\"+ count)\r\n      document.getElementById(\"Audio\").load()\r\n      setCount(count+1)\r\n      if (audioEl.paused)\r\n        audioEl.play()\r\n      // const audioEl = document.getElementById(\"AudioDiv2\")\r\n      // audioEl.pause()\r\n      // audioEl.play()\r\n    }\r\n    console.log(LienBack + \"/GetSong/\"+count)\r\n  }, Math.floor(Math.random() * 3600000-1) +1800000); \r\n  \r\n\r\n  function useInterval(callback, delay) {\r\n    const savedCallback = useRef();\r\n  \r\n    // Remember the latest function.\r\n    useEffect(() => {\r\n      savedCallback.current = callback;\r\n    }, [callback]);\r\n  \r\n    // Set up the interval.\r\n    useEffect(() => {\r\n      function tick() {\r\n        savedCallback.current();\r\n      }\r\n      if (delay !== null) {\r\n        let id = setInterval(tick, delay);\r\n        return () => clearInterval(id);\r\n      }\r\n    }, [delay]);\r\n  }\r\n  \r\n  // RefreshPage={GetListeRecette(\"GetNewCraft/\")}\r\n  return (\r\n    <Router>\r\n      <Switch> \r\n        <Route exact path=\"/\">\r\n            <HomePage NewCraft={NewCraft} NbrRequest={NbrRequest} ResetStatus={ResetStatus} Rechercherecette={Rechercherecette} \r\n            Recette={RecetteRecherche} ListItem={ListItem} ListeCarte={ListeCarte} RefreshPage={GetListeRecette}  Status={RequestStatus} \r\n            RequestStatusFrom={RequestStatusFrom} lienBack={LienBack}/>\r\n        </Route>\r\n        <Route exact path=\"/BDP\">\r\n            <DBPage ListItem={ListItem} ListeCarte={ListeCarte} ListeRecette={ListeRecette} GetRecetteWithItem={GetRecetteWithItem}\r\n            AddCarte={AddCarte} GetRecetteWithCarte={GetRecetteWithCarte} DeleteItem={DeleteItem} ModifItem={ModifItem}/>\r\n        </Route>\r\n      </Switch>\r\n      <audio id=\"Audio\" className=\"audio-element\">\r\n          <source  src={son}></source>\r\n      </audio>\r\n      {/* <audio id=\"AudioDiv2\" className=\"audio-element\">\r\n          <source  id=\"SourceAudio2\"  src={son}></source>\r\n      </audio> */}\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default Manager;\r\n"]},"metadata":{},"sourceType":"module"}