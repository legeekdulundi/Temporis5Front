{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import HomePage from\"./Pages/HomePage\";import{useState,useEffect,useRef}from'react';import DBPage from\"./Pages/DBPage\";import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Manager(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),RecetteRecherche=_useState2[0],setRecetteRecherche=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),ListItem=_useState4[0],setListItem=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),ListeCarte=_useState6[0],setListeCarte=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),RequestStatus=_useState8[0],setRequestStatus=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),RequestStatusFrom=_useState10[0],setRequestStatusFrom=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),ListeRecette=_useState12[0],setListeRecette=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),NbrRequest=_useState14[0],setNbrRequest=_useState14[1];var _useState15=useState('http://167.172.176.232:8888/'),_useState16=_slicedToArray(_useState15,2),LienBack=_useState16[0],setLienBack=_useState16[1];// body: JSON.stringify({ title: 'React POST Request Example' })\nuseEffect(function(){GetListItem();GetListCarte();GetListeRecette(\"GetNewCraft/\");},[]);function GetListItem(){return _GetListItem.apply(this,arguments);}function _GetListItem(){_GetListItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(LienBack+'/GetItemDTO/',{method:'get',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){// res.items.\nres.items.forEach(function(element){element.name=element.name.replaceAll('_',' ');// element.name.\n});setListItem(res.items);});case 1:case\"end\":return _context.stop();}}},_callee);}));return _GetListItem.apply(this,arguments);}function GetListCarte(){return _GetListCarte.apply(this,arguments);}function _GetListCarte(){_GetListCarte=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(LienBack+'/GetCarte/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){// res.items.\nsetListeCarte(res.Carte);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _GetListCarte.apply(this,arguments);}function NewCraft(Craft){fetch(LienBack+'/AddCraft/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Craft)}).then(function(res){return res.json();}).then(function(res){console.log(res);setRequestStatusFrom(res.Api);setRequestStatus(res.statut);setNbrRequest(NbrRequest+1);});}function GetListeRecette(Url){fetch(LienBack+Url,{method:'get',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){// res.items.\nsetListeRecette(res.listeCraft);});}function AddCarte(Param){fetch(LienBack+'/AddCarte/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Param)}).then(function(res){return res.json();}).then(function(res){if(res.statut===200){GetListCarte();}});}function GetRecetteWithCarte(Param){fetch(LienBack+'/GetCraftCarte/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Param)}).then(function(res){return res.json();}).then(function(res){if(res.statut===200){setListeRecette(res.listeCraft);}else setListeRecette([]);});}function GetRecetteWithItem(Param){fetch(LienBack+'/GetCraft/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Param)}).then(function(res){return res.json();}).then(function(res){if(res.statut===200)setListeRecette(res.listeCraft);else{setListeRecette([]);}});}function ResetStatus(){setRequestStatus(0);}function Rechercherecette(Item){fetch(LienBack+'/GetCraft/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Item)}).then(function(res){return res.json();}).then(function(res){// if(RequestStatus===0)\nconsole.log(res.statut);if(res.statut!==400){setRecetteRecherche(res.listeCraft[0]);console.log(res.listeCraft[0]);}setRequestStatusFrom(res.Api);setRequestStatus(res.statut);setNbrRequest(NbrRequest+1);});}function DeleteItem(Item){console.log(\"mqslkdfmqslkd\");fetch(LienBack+'/DeleteCraft/',{method:'delete',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Item)}).then(function(res){return res.json();}).then(function(res){if(RequestStatus===0){if(res.statut!==400)GetListeRecette(\"GetNewCraft/\");}});}function ModifItem(Item){console.log(\"Modif item\");fetch(LienBack+'/ChangeCtaft/',{method:'put',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Item)}).then(function(res){return res.json();}).then(function(res){// if(res.statut!==400)\nGetListeRecette(\"GetNewCraft/\");});}var _useState17=useState(LienBack+\"/GetSong/1\"),_useState18=_slicedToArray(_useState17,2),son=_useState18[0],setson=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),count=_useState20[0],setCount=_useState20[1];useInterval(function(){var audioEl=document.getElementsByClassName(\"audio-element\")[0];if(audioEl.paused){setson(LienBack+\"/GetSong/\"+count);document.getElementById(\"AudioDiv2\").load();setCount(count+1);console.log(count);var _audioEl=document.getElementById(\"AudioDiv2\");_audioEl.pause();_audioEl.play();}console.log(LienBack+\"/GetSong/\"+count);},Math.floor(Math.random()*3600000-1)+1800000);function useInterval(callback,delay){var savedCallback=useRef();// Remember the latest function.\nuseEffect(function(){savedCallback.current=callback;},[callback]);// Set up the interval.\nuseEffect(function(){function tick(){savedCallback.current();}if(delay!==null){var id=setInterval(tick,delay);return function(){return clearInterval(id);};}},[delay]);}// RefreshPage={GetListeRecette(\"GetNewCraft/\")}\nreturn/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(HomePage,{NewCraft:NewCraft,NbrRequest:NbrRequest,ResetStatus:ResetStatus,Rechercherecette:Rechercherecette,Recette:RecetteRecherche,ListItem:ListItem,ListeCarte:ListeCarte,RefreshPage:GetListeRecette,Status:RequestStatus,RequestStatusFrom:RequestStatusFrom,lienBack:LienBack})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/BDP\",children:/*#__PURE__*/_jsx(DBPage,{ListItem:ListItem,ListeCarte:ListeCarte,ListeRecette:ListeRecette,GetRecetteWithItem:GetRecetteWithItem,AddCarte:AddCarte,GetRecetteWithCarte:GetRecetteWithCarte,DeleteItem:DeleteItem,ModifItem:ModifItem})})]}),/*#__PURE__*/_jsx(\"audio\",{id:\"AudioDiv2\",className:\"audio-element\",children:/*#__PURE__*/_jsx(\"source\",{id:\"SourceAudio2\",src:son})})]});}export default Manager;","map":{"version":3,"sources":["C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/src/Manager.js"],"names":["HomePage","useState","useEffect","useRef","DBPage","BrowserRouter","Router","Switch","Route","Manager","RecetteRecherche","setRecetteRecherche","ListItem","setListItem","ListeCarte","setListeCarte","RequestStatus","setRequestStatus","RequestStatusFrom","setRequestStatusFrom","ListeRecette","setListeRecette","NbrRequest","setNbrRequest","LienBack","setLienBack","GetListItem","GetListCarte","GetListeRecette","fetch","method","headers","then","res","json","items","forEach","element","name","replaceAll","Carte","NewCraft","Craft","body","JSON","stringify","console","log","Api","statut","Url","listeCraft","AddCarte","Param","GetRecetteWithCarte","GetRecetteWithItem","ResetStatus","Rechercherecette","Item","DeleteItem","ModifItem","son","setson","count","setCount","useInterval","audioEl","document","getElementsByClassName","paused","getElementById","load","pause","play","Math","floor","random","callback","delay","savedCallback","current","tick","id","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import HomePage from \"./Pages/HomePage\"\r\nimport { useState,useEffect,useRef} from 'react';\r\nimport DBPage from \"./Pages/DBPage\"\r\nimport {  BrowserRouter as Router, Switch, Route,} from \"react-router-dom\";\r\n\r\n\r\nfunction Manager() {\r\n  const [RecetteRecherche, setRecetteRecherche] = useState([]);\r\n  const [ListItem, setListItem] = useState([]);\r\n  const [ListeCarte, setListeCarte] = useState([]);\r\n  \r\n  const [RequestStatus, setRequestStatus] = useState(0);\r\n  const [RequestStatusFrom, setRequestStatusFrom] = useState('');\r\n  const [ListeRecette, setListeRecette] = useState([]);\r\n  const [NbrRequest, setNbrRequest] = useState(0);\r\n\r\n  const [LienBack, setLienBack] = useState('http://167.172.176.232:8888/');\r\n\r\n  // body: JSON.stringify({ title: 'React POST Request Example' })\r\n\r\n  useEffect(() => {\r\n    GetListItem()\r\n    GetListCarte()\r\n    GetListeRecette(\"GetNewCraft/\");\r\n  }, [])\r\n  async function GetListItem()\r\n  {\r\n    fetch(LienBack + '/GetItemDTO/', {\r\n      method: 'get',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      res.items.forEach(element => {\r\n        element.name=element.name.replaceAll('_',' ')\r\n        // element.name.\r\n      });\r\n      setListItem(res.items)\r\n    });\r\n  }\r\n  async function GetListCarte()\r\n  {\r\n    fetch(LienBack + '/GetCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      setListeCarte(res.Carte)\r\n    });\r\n  }\r\n\r\n  function NewCraft(Craft)\r\n  {\r\n    fetch(LienBack + '/AddCraft/', {\r\n        method: 'post',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Craft)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        \r\n          console.log(res);  \r\n          setRequestStatusFrom(res.Api);\r\n          setRequestStatus(res.statut);\r\n          setNbrRequest(NbrRequest+1);\r\n      });\r\n  }\r\n  function GetListeRecette(Url)\r\n  {\r\n    fetch(LienBack + Url, {\r\n      method: 'get',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      setListeRecette(res.listeCraft)\r\n    });\r\n  }\r\n  function AddCarte(Param)\r\n  {\r\n    fetch( LienBack + '/AddCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n      {\r\n        GetListCarte()\r\n      }\r\n    });\r\n  }\r\n  function GetRecetteWithCarte(Param)\r\n  {\r\n    fetch(LienBack + '/GetCraftCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n      {\r\n         setListeRecette(res.listeCraft)\r\n      }\r\n      else\r\n        setListeRecette([])\r\n        \r\n    });\r\n  }\r\n  function GetRecetteWithItem(Param)\r\n  {\r\n    fetch(LienBack + '/GetCraft/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n        setListeRecette(res.listeCraft)\r\n      else\r\n      {\r\n        \r\n        setListeRecette([])\r\n      }\r\n        \r\n    });\r\n  }\r\n  function ResetStatus(){setRequestStatus(0);}\r\n  function Rechercherecette(Item)\r\n  {\r\n    fetch( LienBack + '/GetCraft/', {\r\n        method: 'post',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        // if(RequestStatus===0)\r\n          console.log(res.statut);  \r\n          if(res.statut!==400)\r\n          {\r\n            setRecetteRecherche(res.listeCraft[0])\r\n            console.log(res.listeCraft[0])\r\n            \r\n          }\r\n            \r\n          setRequestStatusFrom(res.Api);\r\n          setRequestStatus(res.statut);\r\n          setNbrRequest(NbrRequest+1);\r\n      });\r\n  }\r\n  function DeleteItem(Item)\r\n  {\r\n    console.log(\"mqslkdfmqslkd\")\r\n    fetch(LienBack + '/DeleteCraft/', {\r\n        method: 'delete',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        if(RequestStatus===0)\r\n        {\r\n          if(res.statut!==400)\r\n            GetListeRecette(\"GetNewCraft/\");\r\n        }\r\n      });\r\n  }\r\n  \r\n  function ModifItem(Item)\r\n  {\r\n    console.log(\"Modif item\")\r\n    fetch(LienBack + '/ChangeCtaft/', {\r\n        method: 'put',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n          // if(res.statut!==400)\r\n          GetListeRecette(\"GetNewCraft/\");\r\n      });\r\n  }\r\n  \r\n  const [son, setson] = useState(LienBack + \"/GetSong/1\")\r\n  const [count, setCount] = useState(0);\r\n  useInterval(() => {\r\n    const audioEl = document.getElementsByClassName(\"audio-element\")[0]\r\n    if(audioEl.paused)\r\n    {\r\n      setson(LienBack + \"/GetSong/\"+ count)\r\n      document.getElementById(\"AudioDiv2\").load()\r\n      setCount(count+1)\r\n      console.log(count)\r\n      const audioEl = document.getElementById(\"AudioDiv2\")\r\n      audioEl.pause()\r\n      audioEl.play()\r\n    }\r\n    console.log(LienBack + \"/GetSong/\"+count)\r\n  }, Math.floor(Math.random() * 3600000-1) +1800000); \r\n  \r\n\r\n  function useInterval(callback, delay) {\r\n    const savedCallback = useRef();\r\n  \r\n    // Remember the latest function.\r\n    useEffect(() => {\r\n      savedCallback.current = callback;\r\n    }, [callback]);\r\n  \r\n    // Set up the interval.\r\n    useEffect(() => {\r\n      function tick() {\r\n        savedCallback.current();\r\n      }\r\n      if (delay !== null) {\r\n        let id = setInterval(tick, delay);\r\n        return () => clearInterval(id);\r\n      }\r\n    }, [delay]);\r\n  }\r\n  \r\n  // RefreshPage={GetListeRecette(\"GetNewCraft/\")}\r\n  return (\r\n    <Router>\r\n      <Switch> \r\n        <Route exact path=\"/\">\r\n            <HomePage NewCraft={NewCraft} NbrRequest={NbrRequest} ResetStatus={ResetStatus} Rechercherecette={Rechercherecette} \r\n            Recette={RecetteRecherche} ListItem={ListItem} ListeCarte={ListeCarte} RefreshPage={GetListeRecette}  Status={RequestStatus} \r\n            RequestStatusFrom={RequestStatusFrom} lienBack={LienBack}/>\r\n        </Route>\r\n        <Route exact path=\"/BDP\">\r\n            <DBPage ListItem={ListItem} ListeCarte={ListeCarte} ListeRecette={ListeRecette} GetRecetteWithItem={GetRecetteWithItem}\r\n            AddCarte={AddCarte} GetRecetteWithCarte={GetRecetteWithCarte} DeleteItem={DeleteItem} ModifItem={ModifItem}/>\r\n        </Route>\r\n      </Switch>\r\n      <audio id=\"AudioDiv2\" className=\"audio-element\">\r\n          <source  id=\"SourceAudio2\"  src={son}></source>\r\n      </audio>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default Manager;\r\n"]},"metadata":{},"sourceType":"module"}