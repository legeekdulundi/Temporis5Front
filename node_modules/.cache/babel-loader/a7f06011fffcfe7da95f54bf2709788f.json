{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import HomePage from\"./Pages/HomePage\";import{useState,useEffect,useRef}from'react';import DBPage from\"./Pages/DBPage\";import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Manager(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),RecetteRecherche=_useState2[0],setRecetteRecherche=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),ListItem=_useState4[0],setListItem=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),ListeCarte=_useState6[0],setListeCarte=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),RequestStatus=_useState8[0],setRequestStatus=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),RequestStatusFrom=_useState10[0],setRequestStatusFrom=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),ListeRecette=_useState12[0],setListeRecette=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),NbrRequest=_useState14[0],setNbrRequest=_useState14[1];var _useState15=useState('http://167.172.176.232:8888'),_useState16=_slicedToArray(_useState15,1),LienBack=_useState16[0];var mediaMatch=window.matchMedia('(min-width: 600px)');var _useState17=useState(mediaMatch.matches),_useState18=_slicedToArray(_useState17,1),matches=_useState18[0];console.log(matches);useEffect(function(){GetListItem();GetListCarte();GetListeRecette(\"/GetNewCraft/\");},[]);function GetListItem(){return _GetListItem.apply(this,arguments);}function _GetListItem(){_GetListItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(LienBack+'/GetItemDTO/',{method:'get',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){// res.items.\nres.items.forEach(function(element){element.name=element.name.replaceAll('_',' ');// element.name.\n});setListItem(res.items);});case 1:case\"end\":return _context.stop();}}},_callee);}));return _GetListItem.apply(this,arguments);}function GetListCarte(){return _GetListCarte.apply(this,arguments);}function _GetListCarte(){_GetListCarte=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(LienBack+'/GetCarte/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){// res.items.\nsetListeCarte(res.Carte);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _GetListCarte.apply(this,arguments);}function NewCraft(Craft){fetch(LienBack+'/AddCraft/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Craft)}).then(function(res){return res.json();}).then(function(res){setRequestStatusFrom(res.Api);setRequestStatus(res.statut);setNbrRequest(NbrRequest+1);});}function GetListeRecette(Url){fetch(LienBack+Url,{method:'get',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){// res.items.\nsetListeRecette(res.listeCraft);});}function GetRecetteWithCarte(Param){fetch(LienBack+'/GetCraftCarte/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Param)}).then(function(res){return res.json();}).then(function(res){if(res.statut===200){setListeRecette(res.listeCraft);}else setListeRecette([]);});}function GetRecetteWithItem(Param){fetch(LienBack+'/GetCraft/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Param)}).then(function(res){return res.json();}).then(function(res){if(res.statut===200)setListeRecette(res.listeCraft);else{setListeRecette([]);}});}function ResetStatus(){setRequestStatus(0);}function Rechercherecette(Item){fetch(LienBack+'/GetCraft/',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Item)}).then(function(res){return res.json();}).then(function(res){if(res.statut!==400){setRecetteRecherche(res.listeCraft[0]);}setRequestStatusFrom(res.Api);setRequestStatus(res.statut);setNbrRequest(NbrRequest+1);});}function DeleteItem(Item){fetch(LienBack+'/DeleteCraft/',{method:'delete',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Item)}).then(function(res){return res.json();}).then(function(res){if(RequestStatus===0){if(res.statut!==400)GetListeRecette(\"/GetNewCraft/\");}});}function ModifItem(Item){console.log(\"Modif item\");fetch(LienBack+'/ChangeCtaft/',{method:'put',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(Item)}).then(function(res){return res.json();}).then(function(res){// if(res.statut!==400)\nGetListeRecette(\"/GetNewCraft/\");});}var _useState19=useState(LienBack+\"/GetSong/1\"),_useState20=_slicedToArray(_useState19,2),son=_useState20[0],setson=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),count=_useState22[0],setCount=_useState22[1];useInterval(function(){var audioEl=document.getElementById(\"Audio\");if(audioEl.paused){setson(LienBack+\"/GetSong/\"+count);document.getElementById(\"Audio\").load();setCount(count+1);if(audioEl)audioEl.play();}},Math.floor(Math.random()*2400000)+1200000);function useInterval(callback,delay){var savedCallback=useRef();// Remember the latest function.\nuseEffect(function(){savedCallback.current=callback;},[callback]);// Set up the interval.\nuseEffect(function(){function tick(){savedCallback.current();}if(delay!==null){var id=setInterval(tick,delay);return function(){return clearInterval(id);};}},[delay]);}// RefreshPage={GetListeRecette(\"GetNewCraft/\")}\nreturn/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(HomePage,{NewCraft:NewCraft,NbrRequest:NbrRequest,ResetStatus:ResetStatus,Rechercherecette:Rechercherecette,Recette:RecetteRecherche,ListItem:ListItem,ListeCarte:ListeCarte,RefreshPage:GetListeRecette,Status:RequestStatus,matches:matches,RequestStatusFrom:RequestStatusFrom,lienBack:LienBack})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/BDP\",children:/*#__PURE__*/_jsx(DBPage,{ListItem:ListItem,ListeCarte:ListeCarte,ListeRecette:ListeRecette,GetRecetteWithItem:GetRecetteWithItem,GetRecetteWithCarte:GetRecetteWithCarte,DeleteItem:DeleteItem,ModifItem:ModifItem,matches:matches})})]}),/*#__PURE__*/_jsx(\"audio\",{id:\"Audio\",className:\"audio-element\",children:/*#__PURE__*/_jsx(\"source\",{src:son})})]});}export default Manager;","map":{"version":3,"sources":["C:/Users/Utilisateur/Desktop/DEV/Projet js/site dofus temporise 5/src/Manager.js"],"names":["HomePage","useState","useEffect","useRef","DBPage","BrowserRouter","Router","Switch","Route","Manager","RecetteRecherche","setRecetteRecherche","ListItem","setListItem","ListeCarte","setListeCarte","RequestStatus","setRequestStatus","RequestStatusFrom","setRequestStatusFrom","ListeRecette","setListeRecette","NbrRequest","setNbrRequest","LienBack","mediaMatch","window","matchMedia","matches","console","log","GetListItem","GetListCarte","GetListeRecette","fetch","method","headers","then","res","json","items","forEach","element","name","replaceAll","Carte","NewCraft","Craft","body","JSON","stringify","Api","statut","Url","listeCraft","GetRecetteWithCarte","Param","GetRecetteWithItem","ResetStatus","Rechercherecette","Item","DeleteItem","ModifItem","son","setson","count","setCount","useInterval","audioEl","document","getElementById","paused","load","play","Math","floor","random","callback","delay","savedCallback","current","tick","id","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import HomePage from \"./Pages/HomePage\"\r\nimport { useState,useEffect,useRef} from 'react';\r\nimport DBPage from \"./Pages/DBPage\"\r\nimport {  BrowserRouter as Router, Switch, Route,} from \"react-router-dom\";\r\n\r\n\r\nfunction Manager() {\r\n  const [RecetteRecherche, setRecetteRecherche] = useState([]);\r\n  const [ListItem, setListItem] = useState([]);\r\n  const [ListeCarte, setListeCarte] = useState([]);\r\n  \r\n  const [RequestStatus, setRequestStatus] = useState(0);\r\n  const [RequestStatusFrom, setRequestStatusFrom] = useState('');\r\n  const [ListeRecette, setListeRecette] = useState([]);\r\n  const [NbrRequest, setNbrRequest] = useState(0);\r\n\r\n  const [LienBack] = useState('http://167.172.176.232:8888');\r\n\r\n  const mediaMatch = window.matchMedia('(min-width: 600px)');\r\n  const [matches] = useState(mediaMatch.matches);\r\n  console.log(matches)\r\n\r\n\r\n  useEffect(() => {\r\n    GetListItem()\r\n    GetListCarte()\r\n    GetListeRecette(\"/GetNewCraft/\");\r\n  }, [])\r\n  async function GetListItem()\r\n  {\r\n    fetch(LienBack + '/GetItemDTO/', {\r\n      method: 'get',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      res.items.forEach(element => {\r\n        element.name=element.name.replaceAll('_',' ')\r\n        // element.name.\r\n      });\r\n      setListItem(res.items)\r\n    });\r\n  }\r\n  async function GetListCarte()\r\n  {\r\n    fetch(LienBack + '/GetCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      setListeCarte(res.Carte)\r\n    });\r\n  }\r\n\r\n  function NewCraft(Craft)\r\n  {\r\n    fetch(LienBack + '/AddCraft/', {\r\n        method: 'post',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Craft)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n          setRequestStatusFrom(res.Api);\r\n          setRequestStatus(res.statut);\r\n          setNbrRequest(NbrRequest+1);\r\n      });\r\n  }\r\n  function GetListeRecette(Url)\r\n  {\r\n    fetch(LienBack + Url, {\r\n      method: 'get',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n    }).then(res=>res.json())\r\n    .then(function(res){\r\n      // res.items.\r\n      setListeRecette(res.listeCraft)\r\n    });\r\n  }\r\n  function GetRecetteWithCarte(Param)\r\n  {\r\n    fetch(LienBack + '/GetCraftCarte/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n      {\r\n         setListeRecette(res.listeCraft)\r\n      }\r\n      else\r\n        setListeRecette([])\r\n        \r\n    });\r\n  }\r\n  function GetRecetteWithItem(Param)\r\n  {\r\n    fetch(LienBack + '/GetCraft/', {\r\n      method: 'post',\r\n      headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n      body: JSON.stringify(Param)\r\n    }).then(res=>res.json())\r\n    .then(function(res) \r\n    {\r\n      if(res.statut===200)\r\n        setListeRecette(res.listeCraft)\r\n      else\r\n      {\r\n        \r\n        setListeRecette([])\r\n      }\r\n        \r\n    });\r\n  }\r\n  function ResetStatus(){setRequestStatus(0);}\r\n  function Rechercherecette(Item)\r\n  {\r\n    fetch( LienBack + '/GetCraft/', {\r\n        method: 'post',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n          if(res.statut!==400)\r\n          {\r\n            setRecetteRecherche(res.listeCraft[0]);\r\n          }\r\n            \r\n          setRequestStatusFrom(res.Api);\r\n          setRequestStatus(res.statut);\r\n          setNbrRequest(NbrRequest+1);\r\n      });\r\n  }\r\n  function DeleteItem(Item)\r\n  {\r\n    fetch(LienBack + '/DeleteCraft/', {\r\n        method: 'delete',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n        if(RequestStatus===0)\r\n        {\r\n          if(res.statut!==400)\r\n            GetListeRecette(\"/GetNewCraft/\");\r\n        }\r\n      });\r\n  }\r\n  \r\n  function ModifItem(Item)\r\n  {\r\n    console.log(\"Modif item\")\r\n    fetch(LienBack + '/ChangeCtaft/', {\r\n        method: 'put',\r\n        headers: {'Accept': 'application/json, text/plain, */*','Content-Type': 'application/json'},\r\n        body: JSON.stringify(Item)\r\n      }).then(res=>res.json())\r\n      .then(function(res) \r\n      {\r\n          // if(res.statut!==400)\r\n          GetListeRecette(\"/GetNewCraft/\");\r\n      });\r\n  }\r\n  \r\n  const [son, setson] = useState(LienBack + \"/GetSong/1\")\r\n  const [count, setCount] = useState(0);\r\n  useInterval(() => {\r\n    const audioEl = document.getElementById(\"Audio\")\r\n    if(audioEl.paused)\r\n    {\r\n      setson(LienBack + \"/GetSong/\"+ count)\r\n      document.getElementById(\"Audio\").load()\r\n      setCount(count+1)\r\n      if (audioEl)\r\n        audioEl.play()\r\n    }\r\n  }, Math.floor(Math.random() * 2400000) +1200000); \r\n  \r\n\r\n  function useInterval(callback, delay) {\r\n    const savedCallback = useRef();\r\n  \r\n    // Remember the latest function.\r\n    useEffect(() => {\r\n      savedCallback.current = callback;\r\n    }, [callback]);\r\n  \r\n    // Set up the interval.\r\n    useEffect(() => {\r\n      function tick() {\r\n        savedCallback.current();\r\n      }\r\n      if (delay !== null) {\r\n        let id = setInterval(tick, delay);\r\n        return () => clearInterval(id);\r\n      }\r\n    }, [delay]);\r\n  }\r\n  \r\n  // RefreshPage={GetListeRecette(\"GetNewCraft/\")}\r\n  return (\r\n    <Router>\r\n      <Switch> \r\n        <Route exact path=\"/\">\r\n            <HomePage NewCraft={NewCraft} NbrRequest={NbrRequest} ResetStatus={ResetStatus} Rechercherecette={Rechercherecette} \r\n            Recette={RecetteRecherche} ListItem={ListItem} ListeCarte={ListeCarte} RefreshPage={GetListeRecette}  Status={RequestStatus} matches={matches}\r\n            RequestStatusFrom={RequestStatusFrom} lienBack={LienBack}/>\r\n        </Route>\r\n        <Route exact path=\"/BDP\">\r\n            <DBPage ListItem={ListItem} ListeCarte={ListeCarte} ListeRecette={ListeRecette} GetRecetteWithItem={GetRecetteWithItem}\r\n            GetRecetteWithCarte={GetRecetteWithCarte} DeleteItem={DeleteItem} ModifItem={ModifItem} matches={matches}/>\r\n        </Route>\r\n      </Switch>\r\n      <audio id=\"Audio\" className=\"audio-element\">\r\n          <source  src={son}></source>\r\n      </audio>\r\n      {/* <audio id=\"AudioDiv2\" className=\"audio-element\">\r\n          <source  id=\"SourceAudio2\"  src={son}></source>\r\n      </audio> */}\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default Manager;\r\n"]},"metadata":{},"sourceType":"module"}